# GTFS-RT Archiver Feed Configuration
# Copy this file to feeds.yaml and customize for your deployment.

# Default settings applied to all feeds unless overridden
defaults:
  interval_seconds: 20      # Fetch every 20 seconds
  timeout_seconds: 30       # Request timeout
  retry:
    max_attempts: 3         # Number of retry attempts
    backoff_base: 1.0       # Initial backoff in seconds
    backoff_max: 10.0       # Maximum backoff in seconds

# Feed definitions
feeds:
  # SEPTA Bus Feeds
  - id: septa-bus-service-alerts
    name: SEPTA Bus Service Alerts
    url: https://www3.septa.org/gtfsrt/septa-pa-us/Service/rtServiceAlerts.pb
    feed_type: service_alerts
    agency: septa
    interval_seconds: 60    # Alerts change less frequently

  - id: septa-bus-trip-updates
    name: SEPTA Bus Trip Updates
    url: https://www3.septa.org/gtfsrt/septa-pa-us/Trip/rtTripUpdates.pb
    feed_type: trip_updates
    agency: septa

  - id: septa-bus-vehicle-positions
    name: SEPTA Bus Vehicle Positions
    url: https://www3.septa.org/gtfsrt/septa-pa-us/Vehicle/rtVehiclePosition.pb
    feed_type: vehicle_positions
    agency: septa

  # SEPTA Rail Feeds
  - id: septa-rail-service-alerts
    name: SEPTA Rail Service Alerts
    url: https://www3.septa.org/gtfsrt/septarail-pa-us/Service/rtServiceAlerts.pb
    feed_type: service_alerts
    agency: septa
    interval_seconds: 60

  - id: septa-rail-trip-updates
    name: SEPTA Rail Trip Updates
    url: https://www3.septa.org/gtfsrt/septarail-pa-us/Trip/rtTripUpdates.pb
    feed_type: trip_updates
    agency: septa

  - id: septa-rail-vehicle-positions
    name: SEPTA Rail Vehicle Positions
    url: https://www3.septa.org/gtfsrt/septarail-pa-us/Vehicle/rtVehiclePosition.pb
    feed_type: vehicle_positions
    agency: septa

  # Example: Feed with header authentication (via GCP Secret Manager)
  # - id: mta-subway-vehicles
  #   name: MTA Subway Vehicle Positions
  #   url: https://api-endpoint.mta.info/Dataservice/mtagtfsfeeds/nyct%2Fgtfs
  #   feed_type: vehicle_positions
  #   agency: mta
  #   auth:
  #     type: header                # Auth via HTTP header
  #     secret_name: mta-api-key    # Secret name in GCP Secret Manager
  #     key: x-api-key              # Header name
  #     value: "${SECRET}"          # ${SECRET} replaced with secret value

  # Example: Feed with query parameter authentication
  # - id: bart-trip-updates
  #   name: BART Trip Updates
  #   url: https://api.bart.gov/gtfsrt/tripupdate.aspx
  #   feed_type: trip_updates
  #   agency: bart
  #   interval_seconds: 15
  #   auth:
  #     type: query                 # Auth via query parameter
  #     secret_name: bart-api-key   # Secret name in GCP Secret Manager
  #     key: key                    # Query parameter name
  #     value: "${SECRET}"
